<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- xml文件 -->
<mapper namespace="com.dengqiang.dao.interfaces.IReleaseManagerDao">
<!-- 	<cache/>  -->
	<insert id="saveNoticeInfo" parameterType="hashMap" useGeneratedKeys="true" keyProperty="id" keyColumn="id">
	   <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Integer">
         select LAST_INSERT_ID() as id
        </selectKey>
        insert into t_notice (user_info_id,housing_estate_id,noticeTitle,noticeDesc,isComment,showName,isTop,isShow,creationTime,showTime)
        values(#{founder},#{housingEstate},#{noticeTitle},#{noticeDesc},#{isComment},#{showName},#{isTop},#{isShow},#{creationTime},#{showTime});
	</insert>
	<update id="updateNoticeInfo" parameterType="hashMap">
	update t_notice set auditor_id=null,auditStatus=0,auditDate=null,
	user_info_id=#{founder},housing_estate_id=#{housingEstate},noticeTitle=#{noticeTitle},
	noticeDesc=#{noticeDesc},isComment=#{isComment},showName=#{showName},isTop=#{isTop},
	isShow=#{isShow},creationTime=#{creationTime},showTime=#{showTime}
	 where id=#{id}
	</update>
	<insert id="saveVoteInfo" parameterType="hashMap" useGeneratedKeys="true" keyProperty="id" keyColumn="id">
	   <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Integer">
          select LAST_INSERT_ID() as id
        </selectKey>
        insert into t_vote(user_info_id,housing_estate_id,voteTitle,beginTime,endTime,creationTime,isComment,showName)
        values(#{founder},#{housingEstate},#{voteTitle},#{beginTime},#{endTime},#{creationTime},#{isComment},#{showName});
	</insert>
	<update id="updateVoteInfo" parameterType="hashMap">
	update t_vote set auditor_id=null,auditStatus=0,auditDate=null,
	user_info_id=#{founder},housing_estate_id=#{housingEstate},voteTitle=#{voteTitle},beginTime=#{beginTime},
	endTime=#{endTime},creationTime=#{creationTime},isComment=#{isComment},showName=#{showName}
	 where id=#{id}
	</update>
	<update id="saveAuditorInfo" parameterType="hashMap">
	update 
	<if test="type=='vote'">t_vote</if>
	<if test="type=='notice'">t_notice</if>
	<if test="type=='review'">t_review_content</if>
	 set auditor_id=#{auditor},auditStatus=#{auditStatus},auditDate=#{auditDate} where id=#{id}
	</update>
</mapper>
